#!/bin/bash
# ----------------------------------------------------------------------
# ENIQ Platform RMI Registry Start/Stop script for SMF to use
#
#
# Usage: rmi_registry start|stop|restart|status
#
# ----------------------------------------------------------------------
# Copyright (c) 1999 - 2012 AB Ericsson. All rights reserved.
# ----------------------------------------------------------------------

unalias stop 2> /dev/null

if [ -z "${CONF_DIR}" ] ; then
  echo "ERROR: CONF_DIR is not set"
  exit 1
fi

. ${CONF_DIR}/niq.rc


if [ -s ${SMF_BIN_DIR}/eniq_service_start_stop.bsh ]; then
  SSR_SCRIPT=${SMF_BIN_DIR}/eniq_service_start_stop.bsh
else
  SSR_SCRIPT=${ADMIN_BIN}/eniq_service_start_stop.bsh
fi

status() {
	${ADMIN_BIN}/rmiregistry status
}

stop(){
	${SSR_SCRIPT} -s rmiregistry -a stop
}

start (){
	${SSR_SCRIPT} -s rmiregistry -a start
}


case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
     stop
     start
     ;;
  status)
    status
    ;;
  *)
    echo "Usage: ${0} start|stop|restart|status"
    exit 10
    ;;
esac
